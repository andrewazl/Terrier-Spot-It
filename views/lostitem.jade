extends layout
block content
    h1= title
    #map
    script(type='text/javascript').
        var map;
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 42.3496, lng: -71.0997},
                zoom: 15
            });
            var geocoder = new google.maps.Geocoder();
            document.getElementById('submit').addEventListener('click', function () {
                geocodeAddress(geocoder, map);
            });
        }
        function geocodeAddress(geocoder, resultsMap) {
            var address = document.getElementById('address').value;
            geocoder.geocode({'address': address}, function (results, status) {
                if (status === google.maps.GeocoderStatus.OK) {
                    resultsMap.setCenter(results[0].geometry.location);
                    var marker = new google.maps.Marker({
                        map: resultsMap,
                        position: results[0].geometry.location
                    });
                } else {
                    alert('Could not Geocode: ' + status);
                }
            });
        }
    script(async='', defer='', src='https://maps.googleapis.com/maps/api/js?key=AIzaSyBBh29L-rAcuz0hMNS4hCncrsNhK_BLPcw&callback=initMap')

    p Please input a location you think you lost an item below:
    #floating-panel
        input#address(type='textbox', placeholder='George Sherman Union')
        input#submit(type='button', value='Locate')
    br

    form#form1(name='form1', method='get', action='getData')
        b
            | Please fill up the form with the lost item information and submit.
        p
            | Select the lost item from one of the selections below:<br>
            select(name='lostitem', multiple='')
                option(value='uid')  BU ID
                option(value='wallet')  Wallet
                option(value='waterbottle')  Waterbottle
                option(value='clothing')  Clothing
                option(value='accessories')  Jewelry or Accessories
                option(value='other')  Other
        p
            | Lost Item Description:<br>
            textarea#description(name='description', placeholder='Enter a short description about the lost item')
        button(onclick='myFunction()') Submit

    p#demo
    script.
        function myFunction() {
            var txt;
            var f = document.getElementsByName("lostitem")
            var d = document.getElementsByName("description")
            var r = confirm("Confirm your information!" +
                    " \n" +
                    "Lost item:&nbsp" +
                    f[0].value +
                    "\n" +
                    "Description:&nbsp" +
                    d[0].value
            );
            if (r == true) {
                input(type = 'submit', value = "submit")
            } else {
                txt = "Cancel!";
            }
            document.getElementById("demo").innerHTML = txt;
        }
